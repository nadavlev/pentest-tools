from itertools import product
import string
import sys

# passwords
numbers_array = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '0']
passwords_special_chars_array = ['!', '@', '#', '$', '%', '^', '&', '*', '(', ')', '-', '_', '=', '+', '~', ';']
alphabet = list(string.ascii_letters)
password_characters_array = numbers_array + passwords_special_chars_array + alphabet

# user name
user_lower_case_chars = list(string.ascii_lowercase)
user_special_chars = [' ', '_', '.', '-', '@'] 
user_character_array = user_lower_case_chars + numbers_array + user_special_chars

def generate_combinations(characters, min_length, max_length, prefix = '', sufix = ''):
    # Generate combinations with lengths from min_length to max_length
    for length in range(min_length, max_length + 1):
        for combination in product(characters, repeat=length):
            yield prefix + ''.join(combination)+sufix


url_special_chars = ["-", ".", "_", "~"]
url_allowed = alphabet + numbers_array + url_special_chars

min_combination_length = 2
max_combination_length = 4

def get_password_iterator(min_len, max_len, prefix, sufix):
    return generate_combinations(password_characters_array, min_len, max_len, prefix, sufix)

def get_username_iterator(min_len, max_len, prefix, sufix):
    return generate_combinations(user_character_array, min_len, max_len, prefix, sufix)

def get_url_iterator(min_len, max_len, prefix, sufix):
    return generate_combinations(url_allowed, min_len, max_len, prefix, sufix)

if __name__ == "__main__":
    print('Second arg should be user or pass, therd arg is minimum length, forth should be max length')
    gen_counter = 0
    opperation = sys.argv[1]
    min = int(sys.argv[2])
    max = int(sys.argv[3])
    prefix = sys.argv[4] if len(sys.argv) >= 5 else '' 
    sufix = sys.argv[5] if len(sys.argv) >= 6 else ''

    if opperation == 'user':
        # Create a generator
        combinations_generator = get_password_iterator(min or min_combination_length, max or min_combination_length, prefix, sufix)

        # Print the generated strings
        for combination in combinations_generator:
            gen_counter += 1
            print(gen_counter, ' -> ' ,combination)

    elif opperation == 'pass':
        # Create a generator
        combinations_generator = get_password_iterator(min or min_combination_length, max or max_combination_length, prefix, sufix)

        # Print the generated strings
        for combination in combinations_generator:
            gen_counter += 1
            print(gen_counter, ' -> ' ,combination)
